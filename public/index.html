
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TAKA ALLIANCE – GoldRain Master Edition</title>
  <link rel="icon" type="image/png" href="assets/logo.png">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at center, #1a0f00 0%, #000000 100%);
      overflow: hidden;
      height: 100vh;
      font-family: 'Poppins', sans-serif;
      color: #ffd700;
    }

    /* Efek hujan emas */
    canvas#goldRain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    /* Header */
    header {
      position: relative;
      text-align: center;
      padding-top: 25px;
      z-index: 5;
    }

    header h1 {
      font-size: 2.3em;
      font-weight: 700;
      color: #ffde6b;
      text-shadow: 0 0 25px #caa91a;
    }

    /* Tombol navigasi */
    .nav-buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
      flex-wrap: wrap;
      z-index: 5;
      position: relative;
    }

    .nav-buttons button {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid rgba(255, 215, 0, 0.5);
      color: #ffde6b;
      font-weight: 600;
      padding: 10px 18px;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
      transition: all 0.3s ease;
    }

    .nav-buttons button:hover {
      background: rgba(255, 215, 0, 0.3);
      transform: translateY(-3px);
    }

    /* Iframe center */
    iframe#plannerFrame {
       position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  height: 80vh;
  border: 1px solid rgba(255, 215, 0, 0.4);
  border-radius: 20px;
  background: rgba(20, 20, 20, 0.98); /* Hampir hitam solid */
  backdrop-filter: none;              /* Matikan blur */
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
  display: none;
  z-index: 5;
    }

    /* Tombol Close */
    #closeBtn {
      position: fixed;
      top: 18px;
      right: 22px;
      background: rgba(255, 215, 0, 0.15);
      border: 1px solid rgba(255, 215, 0, 0.5);
      color: #ffd700;
      font-weight: bold;
      font-size: 1.2em;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      cursor: pointer;
      z-index: 999;
      display: none;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
      transition: all 0.3s ease;
    }

    #closeBtn:hover {
      background: rgba(255, 215, 0, 0.4);
      transform: scale(1.05);
    }

    footer {
      position: fixed;
      bottom: 15px;
      text-align: center;
      width: 100%;
      color: #caa91a;
      font-size: 0.9em;
      z-index: 5;
    }
  </style>
</head>
<body>
  <canvas id="goldRain"></canvas>

  <header>
    <h1>TAKA ALLIANCE</h1>
    <p>GoldRain Master Edition Dashboard</p>
    <div class="nav-buttons">
      <button onclick="openPlanner('Instagram')">Instagram</button>
      <button onclick="openPlanner('LinkedIn')">LinkedIn</button>
      <button onclick="openPlanner('TikTok')">TikTok</button>
      <button onclick="openPlanner('Threads')">Threads</button>
      <button onclick="openPlanner('Reddit')">Reddit</button>
      <button onclick="openPlanner('Medium')">Medium</button>
      <button onclick="openPlanner('X')">X (Twitter)</button>
      <button onclick="openPlanner('YouTube')">YouTube</button>
      <button onclick="openPlanner('Premium_Panel')">Premium Panel</button>
    </div>
  </header>

  <iframe id="plannerFrame" sandbox="allow-same-origin allow-scripts allow-popups" allow="same-origin allow-scripts allow-popups"></iframe>
  <button id="closeBtn" onclick="closePlanner()">✕</button>

  <footer>© 2025 TAKA ALLIANCE — GoldRain Master Edition</footer>

  <script>
    function closePlanner() {
      const frame = document.getElementById('plannerFrame');
      const closeBtn = document.getElementById('closeBtn');
      frame.style.display = 'none';
      closeBtn.style.display = 'none';
    }

    function openPlanner(platform) {
      const frame = document.getElementById('plannerFrame');
      const closeBtn = document.getElementById('closeBtn');
      const base = '/assets/planners/'; // fixed for vercel absolute path
      const paths = {
        Instagram: 'CK44_Instagram_30Day_Planner_GoldIntense.html',
        LinkedIn: 'CK44_LinkedIn_30Day_Planner_GoldIntense.html',
        TikTok: 'CK44_TikTok_30Day_Planner_GoldIntense.html',
        Threads: 'CK44_Threads_30Day_Planner_GoldIntense.html',
        Reddit: 'CK44_Reddit_30Day_Planner_GoldIntense.html',
        Medium: 'CK44_Medium_Planner_1_GoldIntense.html',
        X: 'CK44_X_30Day_Planner_GoldIntense.html',
        YouTube: 'CK44_YouTube_30Day_Planner_GoldIntense.html',
        Premium_Panel: 'CK44_Premium_Panel_Popup_GoldRain.html'
      };
      frame.src = base + paths[platform];
      frame.style.display = 'block';
      frame.onerror = () => {frame.style.display='none';alert('⚠️ Planner gagal dimuat. Pastikan file HTML ada di folder /assets/planners/');};
      closeBtn.style.display = 'block';
    }

    // Efek hujan emas
    const canvas = document.getElementById("goldRain");
    const ctx = canvas.getContext("2d");
    let particles = [];
    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function createParticles() {
      for (let i = 0; i < 120; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 2,
          speed: 0.5 + Math.random() * 1.2
        });
      }
    }
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#ffd700";
      for (let i = 0; i < particles.length; i++) {
        let p = particles[i];
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
        p.y += p.speed;
        if (p.y > canvas.height) {
          p.y = -5;
          p.x = Math.random() * canvas.width;
        }
      }
      requestAnimationFrame(animate);
    }
    createParticles();
    animate();
  </script>

<script>
// === CK44 Level 3 Decrypt Loader (AES‑256‑GCM + PBKDF2) ===
(function(){
  const P1="TA",P2="KA",P3="ALL",P4="IANCE_2025";
  const PASSWORD = (P1+P2+P3+P4); // TAKAALLIANCE_2025

  function b64ToBytes(b64){const bin=atob(b64.trim());const len=bin.length;const bytes=new Uint8Array(len);for(let i=0;i<len;i++)bytes[i]=bin.charCodeAt(i);return bytes;}
  async function importKey(password,salt){
    const enc = new TextEncoder();
    const mat = await crypto.subtle.importKey("raw", enc.encode(password), "PBKDF2", false, ["deriveKey"]);
    return crypto.subtle.deriveKey({name:"PBKDF2", salt, iterations:120000, hash:"SHA-256"},
                                   mat, {name:"AES-GCM", length:256}, false, ["decrypt"]);
  }
  async function decryptB64(b64){
    const buf = b64ToBytes(b64);
    const salt = buf.slice(0,16);
    const iv   = buf.slice(16,28);
    const data = buf.slice(28, buf.length-16);
    const tag  = buf.slice(buf.length-16);
    // WebCrypto AES-GCM expects tag appended to ciphertext; most browsers accept as-is
    const key = await importKey(PASSWORD, salt);
    const full = new Uint8Array(data.length + tag.length);
    full.set(data,0); full.set(tag,data.length);
    const plain = await crypto.subtle.decrypt({name:"AES-GCM", iv}, key, full);
    return new TextDecoder().decode(new Uint8Array(plain));
  }

  // Override openPlanner to use encrypted files
  window.openPlanner = async function(platform){
    const frame = document.getElementById('plannerFrame');
    const closeBtn = document.getElementById('closeBtn');
    try{
      const url = '/public/assets/planners_encrypted/' + platform.toLowerCase() + '.enc';
      const r = await fetch(url);
      if(!r.ok) throw new Error('notfound');
      const b64 = await r.text();
      const html = await decryptB64(b64);
      const blob = new Blob([html], {type:'text/html'});
      const objUrl = URL.createObjectURL(blob);
      frame.src = objUrl;
      frame.style.display = 'block';
      if (closeBtn) closeBtn.style.display = 'block';
    }catch(e){
      alert(e.message==='notfound' ? '⚠️ File terenkripsi tidak ditemukan: ' + platform :
                                     '⚠️ Gagal membuka planner terenkripsi untuk ' + platform);
    }
  };
})();
</script>

</body>
</html>
